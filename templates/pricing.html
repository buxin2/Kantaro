<!-- templates/pricing.html -->
{% extends "base.html" %}

{% block title %}Pricing - Security System{% endblock %}

{% block content %}
<div class="text-center mb-5">
    <h2>Choose Your Plan</h2>
    <p class="lead">Secure your premises with our flexible pricing options</p>
</div>

<div class="row">
    <div class="col-md-3">
        <div class="card">
            <div class="card-header text-center">
                <h4>Free</h4>
                <h2>$0<small>/month</small></h2>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li>✓ 1 Camera</li>
                    <li>✓ Basic object detection</li>
                    <li>✓ Live streaming</li>
                    <li>✗ No recording</li>
                </ul>
                {% if current_user.is_authenticated and current_user.subscription_plan == 'free' %}
                    <button class="btn btn-outline-primary w-100" disabled>Current Plan</button>
                {% else %}
                    <a href="{{ url_for('register') }}" class="btn btn-outline-primary w-100">Get Started</a>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card border-primary">
            <div class="card-header text-center bg-primary text-white">
                <h4>Basic</h4>
                <h2>$9.99<small>/month</small></h2>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li>✓ 1 Camera</li>
                    <li>✓ Advanced object detection</li>
                    <li>✓ Live streaming</li>
                    <li>✓ Email alerts</li>
                </ul>
                {% if current_user.is_authenticated and current_user.subscription_plan == 'basic' %}
                    <button class="btn btn-primary w-100" disabled>Current Plan</button>
                {% else %}
                    <button class="btn btn-primary w-100" onclick="subscribe('basic')" 
                            {% if not current_user.is_authenticated %}disabled{% endif %}>
                        {% if current_user.is_authenticated %}Subscribe{% else %}Login Required{% endif %}
                    </button>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card border-success">
            <div class="card-header text-center bg-success text-white">
                <h4>Pro</h4>
                <h2>$19.99<small>/month</small></h2>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li>✓ 4 Cameras</li>
                    <li>✓ Advanced object detection</li>
                    <li>✓ Live streaming</li>
                    <li>✓ Email & SMS alerts</li>
                    <li>✓ 7-day cloud recording</li>
                </ul>
                {% if current_user.is_authenticated and current_user.subscription_plan == 'pro' %}
                    <button class="btn btn-success w-100" disabled>Current Plan</button>
                {% else %}
                    <button class="btn btn-success w-100" onclick="subscribe('pro')" 
                            {% if not current_user.is_authenticated %}disabled{% endif %}>
                        {% if current_user.is_authenticated %}Subscribe{% else %}Login Required{% endif %}
                    </button>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card border-warning">
            <div class="card-header text-center bg-warning text-dark">
                <h4>Business</h4>
                <h2>$49.99<small>/month</small></h2>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li>✓ 10+ Cameras</li>
                    <li>✓ Advanced object detection</li>
                    <li>✓ Live streaming</li>
                    <li>✓ All alerts</li>
                    <li>✓ 30-day cloud recording</li>
                    <li>✓ Priority support</li>
                </ul>
                {% if current_user.is_authenticated and current_user.subscription_plan == 'business' %}
                    <button class="btn btn-warning w-100" disabled>Current Plan</button>
                {% else %}
                    <button class="btn btn-warning w-100" onclick="subscribe('business')" 
                            {% if not current_user.is_authenticated %}disabled{% endif %}>
                        {% if current_user.is_authenticated %}Subscribe{% else %}Login Required{% endif %}
                    </button>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="text-center mt-5">
    <p class="text-muted">All plans include AI-powered object detection and secure cloud access</p>
</div>
{% endblock %}

{% block scripts %}
<script src="https://js.stripe.com/v3/"></script>
<script>
const stripe = Stripe('{{ stripe_public_key }}');

async function subscribe(plan) {
    alert('Payment integration coming soon! For now, enjoy the free plan.');
    // Stripe integration code would go here
}
</script>
{% endblock %}